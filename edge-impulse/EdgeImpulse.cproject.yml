project:
  description: Edge Impulse example project for SDS inference

  connections:
    - connect: SDS inference demo
      provides:
        - CMSIS-RTOS2
      consumes:
        - SDS_REC_PLAY
        - CMSIS_VIO
        - STDIN
        - STDOUT
        - STDERR
        - Heap: 65536

  define:
    - OS_IDLE_THREAD_NAME: \"Idle\"
    - OS_TIMER_THREAD_NAME: \"Timer\"

  add-path:
      - edge-impulse
      - ./
  groups:

    - group: Documentation
      files:
        - file: ../README.md

    - group: Edge Impulse
      files:
        - file: ei_main.cpp
        - file: ei_classifier_porting.cpp
    - group: peripherals-alif
      for-context:
        - +Alif-DevKit
        - +Alif-AppKit
      files:
        - file: peripheral/alif/sensor.cpp
        - file: peripheral/alif/inertial/i2c_over_i3c.c
        - file: peripheral/alif/inertial/bmi323_icm42670.c
    - group: peripherals-vstream
      for-context:
        - .DebugRec+B-U585I-IOT02A_USB
        - .ReleaseRec+B-U585I-IOT02A_USB
        - .DebugRec+STM32H735G-DK_USB
        - .ReleaseRec+STM32H735G-DK_USB
      files:
        - file: peripheral/vstream/sensor_vstream.c
   
    - group: Application
      files:
        - file: app_main.c
        - file: play_rec_management.c

  components:
    - component: CMSIS:OS Tick:SysTick
    - component: CMSIS:RTOS2:Keil RTX5&Source
    - component: ARM::CMSIS:DSP
    - component: ARM::CMSIS:NN Lib

    # alif peripherals
    - component: AlifSemiconductor::Device:SOC Peripherals:I2C_I3C
      for-context:
        - +Alif-DevKit
        - +Alif-AppKit
    - component: AlifSemiconductor::Device:SOC Peripherals:I3C
      for-context:
        - +Alif-DevKit
        - +Alif-AppKit
    - component: AlifSemiconductor::Device:SOC Peripherals:GPIO
      for-context:
        - +Alif-DevKit
    - component: AlifSemiconductor::BSP:External peripherals:BMI323
      for-context:
        - +Alif-DevKit
        - +Alif-AppKit

  layers:
    - layer: $SDSIO-Layer$
      type:  SDSIO
    - layer: $Board-Layer$
      type:  Board
    - layer: model/edgeimpulse.clayer.yml

  output:
    type:
      - elf
      - hex
      - map
      - bin
